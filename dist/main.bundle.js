(()=>{"use strict";var t,e={7279:(t,e,i)=>{i.r(e)},5475:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Building=void 0;const s=i(8687),o=i(7067),n=i(5473);class a extends s.AnimatedSprite{constructor(t){super(t.buildingTextures),this.elapsedFrames=0,this.elapsedShoots=0,this.projectiles=new s.Container,this.cell=t.cell,this.projectileTexture=t.projectileTexture,this.fireballTextures=t.fireballTextures,this.addChild(this.projectiles)}setTarget(t){this.target=t}handleUpdate(){this.elapsedFrames++;const t=this.elapsedFrames%a.options.framesHold==0;(null!=this.target||null==this.target&&0!==this.currentFrame)&&t&&(this.currentFrame>=this.totalFrames-1?this.currentFrame=0:this.currentFrame++),null!=this.target&&this.currentFrame===a.options.shootFrame&&t&&this.shoot(this.target)}getCenter(){return{cx:this.x+this.cell,cy:this.y+this.cell/2}}shoot(t){let e;this.elapsedShoots>=a.options.shootsAtFireball?(e=new o.Fireball({textures:this.fireballTextures,target:t}),this.elapsedShoots=0):e=new o.Stone({texture:this.projectileTexture,target:t}),(0,n.logBuilding)(this.x,this.y),e.position.set(a.options.spawnProjectileX,a.options.spawnProjectileY),this.projectiles.addChild(e),e.calcVelocity(),this.elapsedShoots++}}a.options={attackRadius:250,framesHold:3,shootsAtFireball:3,shootFrame:6,spawnProjectileX:60,spawnProjectileY:-60},e.Building=a},9986:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Enemy=void 0;const s=i(8687),o=i(5473),n=i(1259);class a extends s.AnimatedSprite{constructor({textures:t,waypoints:e}){if(super(t),this.waypointIndex=2,this.velocity={vx:0,vy:0},this.health=100,this.waypoints=e,this.anchor.set(.5,.5),o.logEnemy.enabled){const t=new s.Graphics;t.beginFill(),t.drawCircle(0,0,a.options.radius),t.endFill(),t.alpha=.5,this.addChild(t)}this.animationSpeed=a.options.animationSpeed,this.play(),this.healthBar=new n.HealthBar,this.healthBar.position.set(-this.healthBar.width/2,-t[0].height/2-this.healthBar.height),this.addChild(this.healthBar)}handleUpdate(){const t=this.waypoints[this.waypointIndex];if(null==t)return;const e=t.y-this.y,i=t.x-this.x,s=Math.atan2(e,i),{moveSpeed:n}=a.options;this.velocity.vx=Math.cos(s)*n,this.velocity.vy=Math.sin(s)*n,(0,o.logEnemy)(`ePosX=${this.position.x} ePosY=${this.position.y} eVX=${this.velocity.vx} eVY=${this.velocity.vy}`),this.position.x+=this.velocity.vx,this.position.y+=this.velocity.vy,Math.hypot(t.y-this.y,t.x-this.x)<n&&this.waypointIndex<this.waypoints.length-1&&this.waypointIndex++}subHealth(t){this.health-=t,this.health<=0&&(this.health=0),this.healthBar.setHealth(this.health/100)}isDead(){return this.health<=0}}a.options={moveSpeed:2,animationSpeed:.5,radius:30,coinsReward:25},e.Enemy=a},2393:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Explosion=void 0;const s=i(8687);class o extends s.AnimatedSprite{constructor({textures:t}){super(t),this.anchor.set(.5,.5),this.animationSpeed=o.options.animationSpeed,this.loop=!1,this.play()}}o.options={animationSpeed:.5},e.Explosion=o},1259:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.HealthBar=void 0;const s=i(8687);class o extends s.Container{constructor(){super(),this.setup(),this.draw()}setup(){this.borderBox=new s.Graphics,this.addChild(this.borderBox);const t=new s.Container;this.emptyBar=new s.Graphics,t.addChild(this.emptyBar);const e=new s.Graphics;t.addChild(e),this.fillBar=e,this.addChild(t)}draw(){const{borderBox:t,fillBar:e,emptyBar:i}=this,{boxOptions:s}=o;t.beginFill(s.border),t.drawRect(0,0,s.width,s.height),t.endFill(),i.beginFill(s.empty),i.drawRect(s.borderThick,s.borderThick,s.width-s.borderThick,s.height-2*s.borderThick),i.endFill(),e.beginFill(s.fill),e.drawRect(s.borderThick,s.borderThick,s.width-s.borderThick,s.height-2*s.borderThick),e.endFill()}setHealth(t){const{boxOptions:e}=o;this.fillBar.width=(e.width-e.borderThick)*t}}o.boxOptions={border:16777215,borderThick:1,width:60,height:10,fill:1409085,empty:16711680},e.HealthBar=o},1557:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.LoaderScene=e.manifest=void 0;const s=i(8687),o=i(5473);e.manifest={bundles:[{name:"bundle-1",assets:{spritesheet:"assets/spritesheets/spritesheet.json",map:"assets/images/map.png",settings:"assets/settings/settings.json"}}]};class n extends s.Container{constructor(t){super(),this.downloadProgress=t=>{this.loaderBarFill.width=(n.barOptions.width-2*n.barOptions.borderThick)*t},this.setup(),this.draw()}setup(){const t=new s.Graphics;this.addChild(t),this.loaderBarBorder=t;const e=new s.Graphics;this.addChild(e),this.loaderBarFill=e}draw(){const{barOptions:t}=n,{loaderBarFill:e,loaderBarBorder:i}=this;i.beginFill(t.borderColor),i.drawRoundedRect(0,0,t.width,t.height,t.borderRadius),i.endFill(),e.beginFill(t.fillColor),e.drawRoundedRect(t.borderThick,t.borderThick,t.width-2*t.borderThick,t.height-2*t.borderThick,t.borderRadius),e.endFill()}async initializeLoader(){await s.Assets.init({manifest:e.manifest}),await s.Assets.loadBundle(e.manifest.bundles.map((t=>t.name)),this.downloadProgress)}getAssets(){return{spritesheet:s.Assets.get("spritesheet"),map:s.Assets.get("map"),settings:s.Assets.get("settings")}}handleResize({viewWidth:t,viewHeight:e}){const i=t,s=e,a=this.width,r=this.height;if(i>=a&&s>=r){const t=i>a?(i-a)/2:0,e=s>r?(s-r)/2:0;(0,o.logLayout)(`Spacing aw=${i} tw=${a} ah=${s} th=${r}`),this.x=t,this.width=n.barOptions.width,this.y=e,this.height=n.barOptions.height}else{let t=1;r>=a?(t=s/r,t*a>i&&(t=i/a),(0,o.logLayout)(`By height (sc=${t})`)):(t=i/a,(0,o.logLayout)(`By width (sc=${t})`),t*r>s&&(t=s/r));const e=Math.floor(a*t),n=Math.floor(r*t),h=i>e?(i-e)/2:0,l=s>n?(s-n)/2:0;(0,o.logLayout)(`aw=${i} (ow=${e}) ah=${s} (oh=${n})`),this.x=h,this.width=e,this.y=l,this.height=n}(0,o.logLayout)(`x=${this.x} y=${this.y} w=${this.width} h=${this.height}`)}handleMounted(){}handleUpdate(){}}n.barOptions={width:350,height:40,fillColor:1588688,borderRadius:5,borderThick:5,borderColor:0},e.LoaderScene=n},6168:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MainScene=void 0;const s=i(8687),o=i(8554),n=i(5473),a=i(6879),r=i(5617),h=i(6826);class l extends s.Container{constructor(t){super(),this.gameEnded=!1,this.handlePointerDown=t=>{this.handleMapViewportMove(!0,t)},this.handlePointerMove=t=>{this.handleMapViewportMove(void 0,t)},this.handlePointerUp=t=>{this.handleMapViewportMove(!1,t)},this.handleKeyDown=t=>{switch((0,n.logKeydown)(`${t.code} ${t.key}`),t.code){case"KeyW":case"ArrowUp":this.map.handleViewportUpMove();break;case"KeyA":case"ArrowLeft":this.map.handleViewportLeftMove();break;case"KeyD":case"ArrowRight":this.map.handleViewportRightMove();break;case"KeyS":case"ArrowDown":this.map.handleViewportDownMove()}},this.startGame=()=>{this.startModal.visible=!1,this.statusBar.restart(),this.map.restart(),this.gameEnded=!1},this.handleTileClick=t=>{this.gameEnded||this.statusBar.coins>=h.PlacementTile.options.cost&&(this.statusBar.subCoins(h.PlacementTile.options.cost),t.occupie(),this.map.placementTiles.children.sort(((t,e)=>t.position.y-e.position.y)))},this.handleSubHearts=()=>{this.statusBar.subHearts(1)},this.handleAddCoins=t=>{this.statusBar.addCoins(t)},this.setup(t),this.addEventLesteners()}setup({mapSettings:t,mapTextures:e,statusTextures:i,viewWidth:s,viewHeight:n}){this.map=new r.Map({mapSettings:t,textures:e,onClick:this.handleTileClick,onSubHearts:this.handleSubHearts,onAddCoins:this.handleAddCoins}),this.addChild(this.map),this.statusBar=new o.StatusBar({textures:i}),this.addChild(this.statusBar),this.startModal=new a.StartModal({viewWidth:s,viewHeight:n}),this.startModal.visible=!1,this.addChild(this.startModal)}handleResize(t){(0,n.logLayout)(`Handle Resize viewWidth=${t.viewWidth} viewHeight=${t.viewHeight}`),this.map.handleResize(t),this.statusBar.scale.set(this.map.scale.x,this.map.scale.y),this.statusBar.position.x=t.viewWidth-this.statusBar.width,this.centerModal(t)}centerModal({viewWidth:t,viewHeight:e}){this.startModal.scale.set(this.map.scale.x,this.map.scale.y),this.startModal.position.set(t/2-this.startModal.width/2,e/2-this.startModal.height/2)}handleUpdate(){this.gameEnded||(this.map.handleUpdate(),this.statusBar.hearts<=0&&this.endGame())}addEventLesteners(){this.map.background.interactive=!0,this.map.background.on("pointerdown",this.handlePointerDown),this.map.background.on("pointermove",this.handlePointerMove),this.map.background.on("pointerup",this.handlePointerUp),window.addEventListener("keydown",this.handleKeyDown),this.startModal.on("click",this.startGame)}handleMapViewportMove(t,e){const i=this.map.toLocal(e.global);(0,n.logPointerEvent)(`${e.type} px=${i.x} py=${i.y}`),this.map.handleViewportMove(t,i.x,i.y)}endGame(){this.gameEnded=!0,this.startModal.scoreText.text=this.statusBar.coins,this.startModal.visible=!0,this.map.stop()}}e.MainScene=l},5617:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Map=void 0;const s=i(8687),o=i(6826),n=i(9986),a=i(2393),r=i(5473),h=i(5475);class l extends s.Container{constructor(t){super(),this.placementTiles=new s.Container,this.spawnEnemiesCount=1,this.enemies=new s.Container,this.explosions=new s.Container,this.pointerXDown=null,this.pointerYDown=null,this.maxXPivot=0,this.maxYPivot=0,this.onClick=t.onClick,this.onSubHearts=t.onSubHearts,this.onAddCoins=t.onAddCoins,this.mapSettings=t.mapSettings,this.textures=t.textures,this.setup()}findTileLayer(t){const e=this.mapSettings.layers.find((e=>"tilelayer"===e.type&&e.name===t));if(null==e)throw new Error(`Unable to detect "${t}" tile layer`);return e}findObjectGroupLayer(t){const e=this.mapSettings.layers.find((e=>"objectgroup"===e.type&&e.name===t));if(null==e)throw new Error(`Unable to detect "${t}" object group layer`);return e}setup(){const{enemies:t,placementTiles:e,textures:{mapTexture:i,placementTexture:n,towerTextures:a,projectileTexture:r,fireballTextures:h},explosions:d}=this;this.background=new s.Sprite(i),this.addChild(this.background),this.spawnEnemies(),this.addChild(t);const{tilesPerRow:c,cell:p}=l.options,u=this.findTileLayer("Placement Tiles");for(let t=0;t<u.data.length;t+=c)u.data.slice(t,t+c).forEach(((i,s)=>{if(14===i){const i=new o.PlacementTile({placementTexture:n,buildingTextures:a,projectileTexture:r,fireballTextures:h,cell:p,onClick:this.onClick});i.position.set(s*p,t/c*p),e.addChild(i)}}));this.addChild(e),this.addChild(d)}cleanFromAll(){for(;null!=this.placementTiles.children[0];)this.placementTiles.children[0].removeFromParent();for(;null!=this.enemies.children[0];)this.enemies.children[0].removeFromParent();for(;null!=this.explosions.children[0];)this.explosions.children[0].removeFromParent()}restart(){this.spawnEnemiesCount=3,this.cleanFromAll(),this.setup()}stop(){this.enemies.children.forEach((t=>{t.stop()}))}handleResize({viewWidth:t,viewHeight:e}){this.placementTiles.visible=!1,this.enemies.visible=!1,e>this.textures.mapTexture.height?(this.scale.y=this.scale.x=e/this.textures.mapTexture.height,this.maxYPivot=0):(this.scale.y=this.scale.x=1,this.height=this.textures.mapTexture.height),this.width>t?this.maxXPivot=(this.width-t)/this.scale.x:this.maxXPivot=0,this.height>e?this.maxYPivot=(this.height-e)/this.scale.y:this.maxYPivot=0,this.pivot.set(0,0),this.placementTiles.visible=!0,this.enemies.visible=!0}spawnEnemies(){const t=this.findObjectGroupLayer("Waypoints").objects[0].polyline,e=t[1];for(let i=1;i<this.spawnEnemiesCount+1;i++){const s=150*i,o=new n.Enemy({waypoints:t,textures:this.textures.orcTextures});o.position.set(e.x-s,e.y),this.enemies.addChild(o)}}handleUpdate(){for(let t=0;t<this.enemies.children.length;t++){const e=this.enemies.children[t];e.handleUpdate(),e.isDead()?(e.removeFromParent(),t--,this.onAddCoins(n.Enemy.options.coinsReward)):e.position.x>this.background.width&&(this.onSubHearts(),e.removeFromParent(),t--)}for(let t=0;t<this.explosions.children.length;t++){const e=this.explosions.children[t];e.currentFrame>=e.totalFrames-1&&(e.removeFromParent(),t--,(0,r.logExplosion)(`Removed explosion ${this.explosions.children.length}`))}for(let t=0;t<this.placementTiles.children.length;t++){const e=this.placementTiles.children[t];if(e.isOccupied()){const t=e.building;t.handleUpdate();const i=this.toLocal(t.getGlobalPosition()),s={cx:i.x+l.options.cell,cy:i.y+l.options.cell/2},o=this.enemies.children.filter((t=>{const e=this.toLocal(t.getGlobalPosition()),i=e.x-s.cx,o=e.y-s.cy;return Math.hypot(i,o)<n.Enemy.options.radius+h.Building.options.attackRadius}));t.setTarget(o[0]);for(let e=0;e<t.projectiles.children.length;e++){const i=t.projectiles.children[e];if(i.handleUpdate(),i.isAlive()){const t=this.toLocal(i.getGlobalPosition()),s=this.toLocal(i.target.getGlobalPosition());if(Math.hypot(t.x-s.x,t.y-s.y)<n.Enemy.options.radius+i.radius&&!i.target.isDead()){if(i.target.subHealth(i.damage),!i.isFireball){const e=new a.Explosion({textures:this.textures.explosionTextures});e.position.set(t.x,t.y),this.explosions.addChild(e),(0,r.logExplosion)(`Added explosion ${e.x} ${e.y}`)}i.removeFromParent(),e--}}else i.removeFromParent(),e--}}}0===this.enemies.children.length&&(this.spawnEnemiesCount+=1,this.spawnEnemies())}isPointerDown(){return null!==this.pointerXDown&&null!==this.pointerYDown}handleViewportUpMove(){this.pivot.y-=l.options.viewportMove,this.checkViewport()}handleViewportDownMove(){this.pivot.y+=l.options.viewportMove,this.checkViewport()}handleViewportLeftMove(){this.pivot.x-=l.options.viewportMove,this.checkViewport()}handleViewportRightMove(){this.pivot.x+=l.options.viewportMove,this.checkViewport()}handleViewportMove(t,e,i){if(!0===t)this.pointerXDown=e,this.pointerYDown=i;else if(!1===t)this.pointerXDown=null,this.pointerYDown=null;else if(this.isPointerDown()){const t=this.pointerXDown-e,s=this.pointerYDown-i;this.pivot.x+=t,this.pivot.y+=s,this.checkViewport(),this.pointerXDown=e,this.pointerYDown=i}}checkViewport(){this.pivot.x<0?this.pivot.x=0:this.pivot.x>this.maxXPivot&&(this.pivot.x=this.maxXPivot),this.pivot.y<0?this.pivot.y=0:this.pivot.y>this.maxYPivot&&(this.pivot.y=this.maxYPivot)}}l.options={tilesPerRow:20,cell:64,viewportMove:40},e.Map=l},6826:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PlacementTile=void 0;const s=i(8687),o=i(5473),n=i(5475);class a extends s.Container{constructor(t){super(),this.handleClick=()=>{this.isOccupied()||"function"!=typeof this.onClick||this.onClick(this)},this.cell=t.cell,this.buildingTextures=t.buildingTextures,this.projectileTexture=t.projectileTexture,this.fireballTextures=t.fireballTextures,this.onClick=t.onClick,this.setup(t),this.draw(),this.enableEventLesteners()}setup({placementTexture:t}){const e=new s.Sprite(t);e.anchor.set(0,.5),e.alpha=.15,this.addChild(e),this.placement=e}draw(){const t=new s.Graphics;t.beginFill(a.options.tileFill),t.drawRect(0,0,2*this.cell,this.cell),t.endFill(),t.alpha=o.logTilePlacement.enabled?.5:.2,this.addChild(t),this.background=t}enableEventLesteners(){this.background.interactive=!0,this.background.on("pointertap",this.handleClick)}isOccupied(){return Boolean(this.building)}occupie(){const t=new n.Building({buildingTextures:this.buildingTextures,projectileTexture:this.projectileTexture,fireballTextures:this.fireballTextures,cell:this.cell});t.anchor.set(0,.5),this.addChild(t),this.building=t,this.background.alpha=this.placement.alpha=0}}a.options={cost:75,tileFill:10741301},e.PlacementTile=a},7067:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Fireball=e.Stone=e.Projectile=void 0;const s=i(8687),o=i(5473);class n extends s.Container{constructor(t){super(),this.elapsedFrames=0,this.isFireball=!1,this.velocity={vx:0,vy:0},this.sprite=t.sprite,this.sprite.anchor.set(.5,.5),this.target=t.target,this.addChild(t.sprite)}calcVelocity(){if(!this.target.isDead()){const t=this.getGlobalPosition(),e=this.target.getGlobalPosition();(0,o.logProjectile)(`x=${t.x} y=${t.y} tX=${e.x} tY=${e.y}`);const i=e.y-t.y,s=e.x-t.x,n=Math.atan2(i,s),{moveSpeed:a}=this;return this.velocity.vx=Math.cos(n)*a,this.velocity.vy=Math.sin(n)*a,n}return 0}handleUpdate(){this.target.isDead()&&this.alpha>0&&(this.alpha-=.05),this.elapsedFrames++,this.position.x+=this.velocity.vx,this.position.y+=this.velocity.vy}isAlive(){return this.elapsedFrames<=this.maxFramesAlive}}e.Projectile=n,e.Stone=class extends n{constructor(t){super({sprite:new s.Sprite(t.texture),target:t.target}),this.moveSpeed=6,this.maxFramesAlive=200,this.radius=10,this.damage=20,this.isFireball=!1,this.target=t.target}},e.Fireball=class extends n{constructor(t){super({sprite:new s.AnimatedSprite(t.textures),target:t.target}),this.moveSpeed=4,this.maxFramesAlive=100,this.radius=10,this.damage=30,this.isFireball=!0,this.target=t.target,this.sprite.play()}handleUpdate(){const t=this.calcVelocity();this.sprite.rotation=t+1,super.handleUpdate()}}},3110:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SceneManager=void 0;const s=i(8687),o=i(5473);class n extends s.Container{handleUpdate(){}handleResize(){}}class a{constructor(){}static get width(){return window.innerWidth}static get height(){return window.innerHeight}static async initialize(){var t;const e=new s.Application({autoDensity:!0,resolution:null!==(t=window.devicePixelRatio)&&void 0!==t?t:1,width:a.width,height:a.height,resizeTo:window});document.body.appendChild(e.view),o.logApp.enabled&&((0,o.logApp)("window.app initialized!"),window.app=e),a.app=e,a.setupEventLesteners()}static setupEventLesteners(){window.addEventListener("resize",a.resizeDeBounce),a.app.ticker.add(a.updateHandler)}static async changeScene(t){a.app.stage.removeChild(a.currentScene),a.currentScene.destroy(),a.currentScene=t,a.app.stage.addChild(a.currentScene),a.resizeHandler()}static resizeDeBounce(){a.cancelScheduledResizeHandler(),a.scheduleResizeHandler()}static cancelScheduledResizeHandler(){clearTimeout(a.resizeTimeoutId)}static scheduleResizeHandler(){a.resizeTimeoutId=setTimeout((()=>{a.cancelScheduledResizeHandler(),a.resizeHandler()}),a.resizeTimeout)}static resizeHandler(){a.currentScene.handleResize({viewWidth:a.width,viewHeight:a.height})}static updateHandler(){a.currentScene.handleUpdate(a.app.ticker.deltaMS)}}a.currentScene=new n,a.resizeTimeout=300,e.SceneManager=a},6879:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StartModal=void 0;const s=i(8687);class o extends s.Container{constructor(t){super(),this.boxOptions={fill:16777215,width:300,height:200,borderRadius:5},this.scoreOptions={top:-50,textColor:0,textSize:40,fontWeight:"bold"},this.pointsOptions={top:-10,textColor:0,textSize:20},this.buttonOptions={top:120,left:50,width:200,height:50,fill:959977,borderRadius:10},this.buttonTextOptions={top:95,textColor:16777215,textSize:20},this.setup(t),this.draw(t),this.setupEventListeners()}setup(t){this.modalBox=new s.Graphics,this.addChild(this.modalBox);const{boxOptions:e,scoreOptions:i,pointsOptions:o,buttonTextOptions:n}=this;this.scoreText=new s.Text("0",{fontSize:i.textSize,fill:i.textColor,fontWeight:i.fontWeight}),this.scoreText.anchor.set(.5,.5),this.scoreText.position.set(e.width/2,e.height/2+i.top),this.addChild(this.scoreText),this.pointsText=new s.Text("You lose",{fontSize:o.textSize,fill:o.textColor}),this.pointsText.anchor.set(.5,.5),this.pointsText.position.set(e.width/2,e.height/2+o.top),this.addChild(this.pointsText),this.button=new s.Graphics,this.button.interactive=!0,this.button.cursor="pointer",this.addChild(this.button),this.buttonText=new s.Text("Start Game",{fontSize:n.textSize,fill:n.textColor}),this.buttonText.anchor.set(.5,.5),this.buttonText.position.set(e.width/2,e.height/2/2+n.top),this.button.addChild(this.buttonText)}draw(t){const{boxOptions:e,buttonOptions:i}=this;this.modalBox.beginFill(e.fill),this.modalBox.drawRoundedRect(0,0,e.width,e.height,e.borderRadius),this.modalBox.endFill(),this.button.beginFill(i.fill),this.button.drawRoundedRect(i.left,i.top,i.width,i.height,i.borderRadius),this.button.endFill()}setupEventListeners(){this.button.on("pointertap",(t=>{this.emit("click",t)}))}}e.StartModal=o},8554:(t,e,i)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatusBar=void 0;const s=i(8687);class o extends s.Container{constructor(t){super(),this._hearts=10,this._coins=100,this.setup(t),this.drawBackground()}get coins(){return this._coins}get hearts(){return this._hearts}setup({textures:{coinsTexture:t,heartTexture:e}}){const{options:{padding:i,inlinePadding:n,coinsScale:a,heartScale:r,textSize:h,textColor:l,textStroke:d}}=o,c=new s.Graphics;this.addChild(c),this.background=c;const p=new s.Sprite(t);p.position.set(i,i),p.scale.set(a),this.addChild(p),this.coinsIcon=p;const u=new s.Text(this._coins,{fontSize:h,fill:l,stroke:d});u.position.set(p.x+p.width+n,i),this.addChild(u),this.coinsText=u;const g=new s.Sprite(e);g.position.set(u.x+u.width+n,i),g.scale.set(r),this.addChild(g),this.heartIcon=g;const x=new s.Text(this._hearts,{fontSize:h,fill:l,stroke:d});x.position.set(g.x+g.width+n,i),this.addChild(x),this.heartsText=x}drawBackground(){this.background.beginFill(o.options.backgroundFill),this.background.drawRect(0,0,this.width+2*o.options.padding,this.height+2*o.options.padding),this.background.endFill(),this.background.alpha=.5}addCoins(t){this._coins+=Math.round(t),this.coinsText.text=this._coins}subCoins(t){this._coins-=t,this.coinsText.text=this._coins}subHearts(t){this._hearts-=t,this.heartsText.text=this._hearts}restart(){this._coins=100,this.coinsText.text=this._coins,this._hearts=10,this.heartsText.text=this._hearts}}o.options={inlinePadding:10,padding:20,textColor:16777215,textSize:24,textStroke:2,coinsScale:.1,heartScale:.1,backgroundFill:0},e.StatusBar=o},6752:(t,e,i)=>{i(7279);const s=i(3110),o=i(6168),n=i(1557);(async function(){var t;const e=document.querySelector(".ellipsis");null!=e&&(null===(t=e.parentElement)||void 0===t||t.removeChild(e)),await s.SceneManager.initialize();const i=new n.LoaderScene({viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height});await s.SceneManager.changeScene(i),await i.initializeLoader();const{map:a,settings:r,spritesheet:{animations:h,textures:l}}=i.getAssets();await s.SceneManager.changeScene(new o.MainScene({viewWidth:s.SceneManager.width,viewHeight:s.SceneManager.height,mapSettings:r,mapTextures:{mapTexture:a,towerTextures:h.tower,orcTextures:h.orc,explosionTextures:h.explosion,projectileTexture:l["projectile.png"],fireballTextures:h.fireball,placementTexture:h.tower[6]},statusTextures:{coinsTexture:l["coins.png"],heartTexture:l["heart.png"]}}))})().catch((t=>{var e;console.error(t);const i=document.querySelector(".error-message");null!=i&&(i.classList.remove("hidden"),i.innerText=Boolean(t)&&Boolean(t.message)?t.message:t);const s=document.querySelector(".error-stack");null!=s&&(s.classList.remove("hidden"),s.innerText=Boolean(t)&&Boolean(t.stack)?t.stack:"");const o=document.querySelector("canvas");null!=o&&(null===(e=o.parentElement)||void 0===e||e.removeChild(o))}))},5473:function(t,e,i){var s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.logProjectile=e.logBuilding=e.logExplosion=e.logEnemy=e.logTilePlacement=e.logCollision=e.logKeydown=e.logPointerEvent=e.logLayout=e.logApp=void 0;const o=s(i(1227));e.logApp=(0,o.default)("td-app"),e.logLayout=(0,o.default)("td-layout"),e.logPointerEvent=(0,o.default)("td-pointer-event"),e.logKeydown=(0,o.default)("td-keydown"),e.logCollision=(0,o.default)("td-collision"),e.logTilePlacement=(0,o.default)("td-tile-placement"),e.logEnemy=(0,o.default)("td-enemy"),e.logExplosion=(0,o.default)("td-explosion"),e.logBuilding=(0,o.default)("td-building"),e.logProjectile=(0,o.default)("td-projectile")}},i={};function s(t){var o=i[t];if(void 0!==o)return o.exports;var n=i[t]={id:t,loaded:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.loaded=!0,n.exports}s.m=e,t=[],s.O=(e,i,o,n)=>{if(!i){var a=1/0;for(d=0;d<t.length;d++){for(var[i,o,n]=t[d],r=!0,h=0;h<i.length;h++)(!1&n||a>=n)&&Object.keys(s.O).every((t=>s.O[t](i[h])))?i.splice(h--,1):(r=!1,n<a&&(a=n));if(r){t.splice(d--,1);var l=o();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[i,o,n]},s.d=(t,e)=>{for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t={179:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var o,n,[a,r,h]=i,l=0;if(a.some((e=>0!==t[e]))){for(o in r)s.o(r,o)&&(s.m[o]=r[o]);if(h)var d=h(s)}for(e&&e(i);l<a.length;l++)n=a[l],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(d)},i=self.webpackChunksimple_html5_td_game=self.webpackChunksimple_html5_td_game||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var o=s.O(void 0,[736],(()=>s(6752)));o=s.O(o)})();